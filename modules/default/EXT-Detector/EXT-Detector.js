Module.register("EXT-Detector",{requiresVersion:"2.22.0",defaults:{debug:!1,useIcon:!0,touchOnly:!1,porcupineAccessKey:null,porcupineCustomModel:null,snowboyMicConfig:{audioGain:2,applyFrontend:!0},detectors:[{detector:"Snowboy",Model:"jarvis",Sensitivity:null},{detector:"Porcupine",Model:"ok google",Sensitivity:null},{detector:"Porcupine",Model:"hey google",Sensitivity:null}]},start:function(){this.ready=!1,this.config.mic={recorder:"auto",device:"default"},this.config.snowboyMicConfig=configMerge({},this.config.mic,this.config.snowboyMicConfig),this.config.touchOnly&&(this.config.useIcon=!0),this.visual=new DetectorVisual(this)},notificationReceived:function(e,i,t){switch(e){case"EXT_DETECTOR-START":this.ready&&this.sendSocketNotification("START");break;case"EXT_DETECTOR-STOP":this.ready&&this.sendSocketNotification("STOP");break;case"GW_READY":"Gateway"==t.name&&this.sendSocketNotification("INIT",this.config)}},socketNotificationReceived:function(e,i){switch(e){case"INITIALIZED":this.sendNotification("EXT_HELLO",this.name),this.ready=!0;break;case"NOT_INITIALIZED":this.sendNotification("EXT_ALERT",{message:"Error: No detectors found, please review your configuration",type:"error"});break;case"WARNING":case"ERROR":this.sendNotification("EXT_ALERT",{message:"Error when loading "+i.library+" library. Try `npm run rebuild` in EXT-Detector directory",type:"error"});break;case"ACCESSKEY":this.sendNotification("EXT_ALERT",{message:"Error: No porcupineAccessKey provided in config",type:"error"});break;case"PORCUPINENOTINIT":this.sendNotification("EXT_ALERT",{message:"Error: Can't start Porcupine detector",type:"error"});case"LISTENING":this.visual.DetectorRefreshLogo(this,!1);break;case"DETECTED":this.visual.DetectorActivateWord(this);break;case"DISABLED":this.visual.DetectorDisabled(this)}},getStyles:function(){return[this.file("EXT-Detector.css")]},getScripts:function(){return["/modules/EXT-Detector/components/visual.js"]},getDom:function(){return this.visual.DetectorDom(this)}});